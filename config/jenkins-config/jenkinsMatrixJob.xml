<?xml version='1.0' encoding='UTF-8'?>
<matrix-project>
  <actions/>
    <description></description>
      <keepDependencies>false</keepDependencies>
        <properties>
            <hudson.model.ParametersDefinitionProperty>
                  <parameterDefinitions>
                          <hudson.model.StringParameterDefinition>
                                    <name>BASEDIR</name>
                                              <description>location to the virtual env</description>
                                                        <defaultValue></defaultValue>
                                                                </hudson.model.StringParameterDefinition>
                                                                        <hudson.model.StringParameterDefinition>
                                                                                  <name>MGMT_SVR</name>
                                                                                            <description>management server ip</description>
                                                                                                      <defaultValue></defaultValue>
                                                                                                              </hudson.model.StringParameterDefinition>
                                                                                                                      <hudson.model.StringParameterDefinition>
                                                                                                                                <name>buildNumber</name>
                                                                                                                                          <description>the buildnumber of the previous build.</description>
                                                                                                                                                    <defaultValue></defaultValue>
                                                                                                                                                            </hudson.model.StringParameterDefinition>
                                                                                                                                                                    <hudson.model.StringParameterDefinition>
                                                                                                                                                                              <name>configFileName</name>
                                                                                                                                                                                        <description></description>
                                                                                                                                                                                                  <defaultValue></defaultValue>
                                                                                                                                                                                                          </hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                  <hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                            <name>zoneName</name>
                                                                                                                                                                                                                                      <description>zone to execute the testes on</description>
                                                                                                                                                                                                                                                <defaultValue></defaultValue>
                                                                                                                                                                                                                                                        </hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                                                <hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                                                          <name>hypervisor</name>
                                                                                                                                                                                                                                                                                    <description>hypervisor tag to use while executing the test.</description>
                                                                                                                                                                                                                                                                                              <defaultValue></defaultValue>
                                                                                                                                                                                                                                                                                                      </hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                                                                                            </parameterDefinitions>
                                                                                                                                                                                                                                                                                                                </hudson.model.ParametersDefinitionProperty>
                                                                                                                                                                                                                                                                                                                  </properties>
                                                                                                                                                                                                                                                                                                                    <scm class="hudson.scm.NullSCM"/>
                                                                                                                                                                                                                                                                                                                      <canRoam>true</canRoam>
                                                                                                                                                                                                                                                                                                                        <disabled>false</disabled>
                                                                                                                                                                                                                                                                                                                          <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
                                                                                                                                                                                                                                                                                                                            <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
                                                                                                                                                                                                                                                                                                                              <authToken>bharat</authToken>
                                                                                                                                                                                                                                                                                                                                <triggers class="vector"/>
                                                                                                                                                                                                                                                                                                                                  <concurrentBuild>true</concurrentBuild>
                                                                                                                                                                                                                                                                                                                                    <axes>
                                                                                                                                                                                                                                                                                                                                        <hudson.matrix.TextAxis>
                                                                                                                                                                                                                                                                                                                                              <name>suite</name>
                                                                                                                                                                                                                                                                                                                                                    <values>
                                                                                                                                                                                                                                                                                                                                                            <string>test_templates</string>
                                                                                                                                                                                                                                                                                                                                                                    <string>test_affinity_groups</string>
                                                                                                                                                                                                                                                                                                                                                                            <string>test_vm_life_cycle</string>
                                                                                                                                                                                                                                                                                                                                                                                    <string>test_vm_snapshots</string>
                                                                                                                                                                                                                                                                                                                                                                                            <string>test_volumes</string>
                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_iso</string>
                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_secondary_storage</string>
                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_loadbalance</string>
                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_deploy_vm</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_deploy_vm_with_userdata</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_deploy_vms_with_varied_deploymentplanners</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_disk_offerings</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_global_settings</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_guest_vlan_range</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_hosts</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_internal_lb</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_network</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_network_acl</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_nic</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_non_contigiousvlan</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_portable_publicip</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_primary_storage</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_privategw_acl</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_public_ip_range</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_pvlan</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_regions</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_resource_detail</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_routers</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_scale_vm</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <string>test_service_offerings</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <string>test_reset_vm_on_reboot</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </values>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </hudson.matrix.TextAxis>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <hudson.matrix.LabelAxis>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <name>label</name>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <values>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <string>cobbler-hydTest</string>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </values>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </hudson.matrix.LabelAxis>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </axes>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <builders>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <hudson.tasks.Shell>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <command>mkdir -p /automation/jenkins/workspace/simulator_test_results/label/cobbler-hydTest/suite/${buildNumber}/reports
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      mkdir -p $WORKSPACE/reports
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </command>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </hudson.tasks.Shell>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <hudson.tasks.Shell>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <command>#Execute the test case execution
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    LOGS=&quot;/cloudstack-qa/incubator-cloudstack/test/logs&quot;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    #MGMT_SVR parameterized
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    #BASEDIR parameterrized path to the virtual test env
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    CONFIG=${BASEDIR}/${configFileName}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    cd $BASEDIR



set +e
${BASEDIR}/testenv/bin/nosetests-2.7 --with-xunit --xunit-file=$suite.xml --with-marvin --marvin-config=$CONFIG $BASEDIR/test/integration/smoke/$suite.py --load -a zone=${zoneName} hypervisor=${hypervisor} tags=advanced --log-folder-path=${BASEDIR}/$suite
set -e

mkdir -p $suite/reports
cp $suite.xml $suite/reports


rm -rf $WORKSPACE/reports/$suite.xml
cp $suite.xml $WORKSPACE/reports/
rm -rf $suite.xml</command>
    </hudson.tasks.Shell>
      </builders>
        <publishers>
            <hudson.tasks.junit.JUnitResultArchiver>
                  <testResults>reports/*.xml</testResults>
                        <keepLongStdio>true</keepLongStdio>
                              <testDataPublishers/>
                                  </hudson.tasks.junit.JUnitResultArchiver>
                                      <hudson.plugins.parameterizedtrigger.BuildTrigger>
                                            <configs>
                                                    <hudson.plugins.parameterizedtrigger.BuildTriggerConfig>
                                                              <configs>
                                                                          <hudson.plugins.parameterizedtrigger.CurrentBuildParameters/>
                                                                                      <hudson.plugins.parameterizedtrigger.PredefinedBuildParameters>
                                                                                                    <properties>jobName=${env.JOB_NAME}
                                                                                                    </properties>
                                                                                                                </hudson.plugins.parameterizedtrigger.PredefinedBuildParameters>
                                                                                                                          </configs>
                                                                                                                                    <projects>writeJobCompleteNotification, </projects>
                                                                                                                                              <condition>ALWAYS</condition>
                                                                                                                                                        <triggerWithNoParameters>false</triggerWithNoParameters>
                                                                                                                                                                </hudson.plugins.parameterizedtrigger.BuildTriggerConfig>
                                                                                                                                                                      </configs>
                                                                                                                                                                          </hudson.plugins.parameterizedtrigger.BuildTrigger>
                                                                                                                                                                            </publishers>
                                                                                                                                                                              <buildWrappers/>
                                                                                                                                                                                <executionStrategy class="hudson.matrix.DefaultMatrixExecutionStrategyImpl">
                                                                                                                                                                                    <runSequentially>false</runSequentially>
                                                                                                                                                                                        <touchStoneCombinationFilter>suite=&quot;test_disk_offerings&quot;</touchStoneCombinationFilter>
                                                                                                                                                                                            <touchStoneResultCondition>
                                                                                                                                                                                                  <name>SUCCESS</name>
                                                                                                                                                                                                        <ordinal>0</ordinal>
                                                                                                                                                                                                              <color>BLUE</color>
                                                                                                                                                                                                                  </touchStoneResultCondition>
                                                                                                                                                                                                                    </executionStrategy>
                                                                                                                                                                                                                    </matrix-project>
